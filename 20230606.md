# 取り組んだ課題一覧
* web技術の基本を学ぶ 読了
# わかったこと
## web技術の基本を学ぶ
### セッション
ログイン→注文する商品を選択→注文→ログアウト  
上記のような一連の処理の流れ  

### セッションID
Webサーバーにリクエストを発行したWebクライアントを識別するためのID  
Cookieを利用してやり取りをすることで、Webサーバー側はクライアントの状態（ログイン状態、カートの中身）を復元できる。  
ログアウト時にWebサーバーに記憶されているセッション情報を破棄することで、セッションIDが無効化される→URLを入力して再度アクセスすることが不可能になる。  

### Basic認証
HTTPの仕様の一部として規定されている  
プログラムの作成が必要なく、ブラウザの設定だけで実現可能  
パスワードが平文で送信されるため、SSLによる暗号化やパスワードを直接やり取りしないDigest認証を使用する方が安全  

### DBMS
データベース管理システム  
コンピュータ上でDBを構築し、DBに対して大量の情報を記憶して様々な条件で拘束に検索、計算ができる  
Webアプリケーションにより、大量の情報を扱う必要があって生まれた  

### DBサーバーを分離する理由
Webサーバーと分けることで各コンピュータへの負荷の軽減ができる  
DBサーバーだけを利用したい場合に都合がいい（新システムの構築等）  

### Webサーバーとアプリケーションサーバーを分ける理由
- Webサーバー  
受け付けるHTTPリクエストの数が非常に多くなる  
軽い処理で回数の多い静的コンテンツへのリクエストを処理する  

- アプリサーバー  
Webアプリケーションの処理（DB操作、HTMLへの整形等）が多くなる  
静的コンテンツに比べ回数が少ない動的コンテンツを処理する  
異なる性格のリクエストをうまく分担することができる。  

### アプリケーションサーバーの提供する機能
- セッション管理  
- トランザクション機能（処理が失敗したときのロールバック等）  
- DB接続の管理  
Webアプリケーション開発者がDB接続の状態を気にしなくていいようにしている。  
- Webアプリケーションの管理とシステムの可用性・性能の向上  

### コネクション・プーリング
最初にアプリケーションサーバーが代表してDBへの接続を確保しておき、Webアプリケーションの必要に応じて接続を使いまわすことで、DBアクセスを高速化する仕組み  

### MVCモデル
* **Model**  
アプリケーションの処理部分、処理部分に関する情報の保持  
画面に対する入出力部分にはかかわりを持たない  

* **Controller**  
画面からの情報入力とモデルの呼び出し、その結果に従ったビューの呼び出し  
全体の流れを制御する  

* **View**  
処理結果の画面への表示  
モデルから処理結果を取り出して、成形したものを画面表示する。  

### 物理名  
実際にDB上で使用しているカラム名  
例：ITEM_NAME  

### 論理名  
設計上の名前  
例：商品名  

### SQLインジェクション  
入力フォームにSQLを意図しない形に変更し、情報の不正取得や改ざんを行う  
対策  
- 入力チェック  
半角英数字を受け付ける等「’」を入力させないようにする  
フレームワークには、入力チェックを自動的に行うバリデーション機能があることが多い  

- プリペアード・ステートメント  
WHERE句など条件によって変化する部分をプレースホルダとして登録したSQLを事前に用意しておき、あとからパラメータを割り当てる  

### クロスサイトスクリプティング（XSS）  
HTMLの中に悪意のあるjsを埋め込む  
WebサーバーからWebブラウザへ返されるレスポンスの中に埋め込むことができ、埋め込んだスクリプトをブラウザに実行させることができる。  
Cookieの盗難やページの改ざんなどが実行できる。→不正ログインや個人情報の流出  
脆弱性のあるサイトは攻撃の踏み台として利用される。  
リンクを用意し、GETリクエストを利用してjsを脆弱性のあるサイトに渡す→リンクをクリックするとjsが被害者のブラウザで実行される  

対策  
- サニタイジング  
HTMLに埋め込むと元のHTMLの構造を変更したり破壊してしまう文字列を削除したり無害な文字列に変換したりする処理  
HTML：「<」「>」「&」「”」「’」  
SQL：「’」「—」(—はコメントとして扱われるため)  

### セッションハイジャック  
クライアントとサーバー間でやり取りされているセッションIDを盗み取ることでなりすましてサービスを利用する攻撃  
対策  
- XSS対策  
セッションハイジャックの手段がXSSである。  
そのため、XSSの脆弱性をなくしておくことでセッションハイジャックの対策にもつながる  
- 通信経路の暗号化  
SSLによって暗号化することでインターネット上を流れるセッションIDが盗まれる可能性はなくなる  
- セッションタイムアウト  
セッション情報は破棄しない限りログアウトまでサーバーに保持され続けている。  
ログアウト操作を忘れた場合等はセッションタイムアウトさせる。  
安全性と操作性を考えてセッションタイムアウト時間を設定する。  

- セッションIDのランダム化  
予測されない大きな桁数の数字をランダムに選択する  
言語処理系やAPサーバーを利用する限り開発者が実装する必要はない  

### クロスサイトリクエストフォージェリ（CSRF）  
攻撃者が捏造したフォームから強制的に情報をサブミットすることで、掲示板に書き込みをされたり強制的に買い物をさせられたりする攻撃  
ログインが必要なサイトでも被害者がすでにログインしていれば攻撃者はログインID、PWが必要ない（ブラウザがCookieを送るため）  
対策  
- 正規のWebサーバー以外が作成したフォームからサブミットできないようにする。  
ランダムに生成された数字や文字列などを用意したワンタイムトークンを作成し、Webサーバー上で記憶する   
Webブラウザに表示するフォームの内部にhiddenパラメータを使ってワンタイムトークンを埋め込んでおく  
フォームの内容送信時にhiddenパラメータも同時に送信する  
リクエストのワンタイムトークンとサーバーに記憶しているワンタイムトークンが一致すればサブミットを受け入れる。  

### 強制ブラウズ  
アドレスバーにURLを直接入力し、本来表示されるべきではない画面を表示される攻撃  
対策  
- どの画面にアクセスされてもログイン状態をチェックする  
未ログインの場合は、ログイン画面を経由させる  

### ディレクトリトラバーサル  
ユーザーからの入力により、ファイルにアクセスできてしまう攻撃  
対策  
- サニタイジングによって「/」「￥」を削除する  
- Webアプリケーションを実行するユーザーを専用のものにし、そのユーザーに関係するファイル以外にはアクセスできないように設定する。  

### 戻るボタン対策  
- キャッシュ無効化  
- 戻るボタン無効化  
- ワンタイムトークンの利用（実装の手間はかかるが、確実）  
ワンタイムトークンを利用することで、サブミット→戻る→サブミットと処理が行われてもエラーと判定できる。  
1回目のサブミット時に送信されたワンタイムトークンが処理済ということが管理テーブルを参照することで確認できるため  

### ダブルサブミット対策  
ボタンを2度押してしまうことにより、2回同じ処理がされてしまうこと  
- JSによる対策  
JSが無効になっていると効果を発揮しない  
- ワンタイムトークンの利用  
戻るボタンと同様  
JSと併用することで、利用者の利便性が高い（余計なリクエストを送らないようにできるのでエラーの発生を防ぐことができる。）  
  
# 次やること
* web技術の基本を学ぶ 課題提出  
* vimの基本を理解する  
# 感じたこと
* 面白くてサラッと読んでしまった。実務に活かせそうな部分も多くとても勉強になった。  
* 定期的に読み返したいし、人に薦めたい本だと思った。  
# 学習時間
3h

計56h
